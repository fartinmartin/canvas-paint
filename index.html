<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="/vite.svg" />
		<link rel="stylesheet" href="/style.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>canvas-paint ⬝ demo</title>
	</head>
	<body>
		<h1>canvas-paint ⬝ demo</h1>
		<main>
			<div id="controls">
				<div class="history">
					<button onclick="demo.undo()">undo</button>
					<button onclick="demo.redo()">redo</button>
				</div>
				<div class="mode">
					<button onclick="demo.brush.mode = `draw`">draw</button>
					<button onclick="demo.brush.mode = `erase`">erase</button>
					<button onclick="demo.brush.mode = `fill`">fill</button>
				</div>
				<div class="brush">
					<button onclick="demo.brush.size--">brush-</button>
					<button onclick="demo.brush.size++">brush+</button>
					<input onchange="updateBrushColor(this)" type="color" />
				</div>
				<div class="radius">
					<button onclick="demo.brush.lazy.radius--">radius-</button>
					<button onclick="demo.brush.lazy.radius++">radius+</button>
				</div>
				<div class="tolerance">
					<button onclick="demo.brush.tolerance--">tolerance-</button>
					<button onclick="demo.brush.tolerance++">tolerance+</button>
				</div>
				<div class="remove">
					<button onclick="demo.clear()">clear</button>
					<button onclick="demo.destroy()">destroy</button>
				</div>
				<div class="io">
					<button onclick="save">save</button>
					<button onclick="load">load</button>
					<button onclick="png">png</button>
					<button onclick="demo.drawHistory(10)">draw</button>
				</div>
				<div class="background">
					<input onchange="updateBgColor(this)" type="color" />
				</div>
			</div>
			<div id="app"></div>
		</main>
		<script type="module">
			import { Paint } from "./src/index.ts";

			const app = document.getElementById("app");

			const demo = new Paint(app, {
				width: 400,
				height: 400,
				bgColor: "whitesmoke",
			});

			// @ts-ignore ⚠️ don't do this in production :)
			window.demo = demo;
		</script>
		<script>
			window.addEventListener("load", () => {
				const brush = document.querySelectorAll("input[type='color']")[0];
				const bg = document.querySelectorAll("input[type='color']")[1];
				brush.value = demo.brush.color;
				bg.value = demo.options.bgColor; // not guarenteed to be a hex value
			});
			const updateBrushColor = (target) => (demo.brush.color = target.value);
			const updateBgColor = (target) => (demo.options.bgColor = target.value);
		</script>
	</body>
</html>
